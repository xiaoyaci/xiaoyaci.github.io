<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>效果</title>
		<link rel="stylesheet" type="text/css" href="css/main.css"/>
		<!--分辨率范围:1200 - 2000-->
	</head>
	<body>
		<section id="wrap">
			<!--流体布局-->
			<div id="mack">
				<div class="dow"></div>
				<div class="up"></div>
				<div class="line"></div>
			</div>
			<header id="head">
				<!--固定布局-->
				<div class="headMain">
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png"/>
						</a>
					</h1>
					
					<nav class="nav">
						<ul class="list clearfix">
							<li>
								<a href="javascript:;">
									<div class="up"><img src="img/home_gruen.png"/></div>
									<div class="down"><img src="img/home.png"/></div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Course</div>
									<div class="down">Course</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Works</div>
									<div class="down">Works</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">About</div>
									<div class="down">About</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">Team</div>
									<div class="down">Team</div>
								</a>
							</li>
						</ul>
					</nav>
					<div class="arrow"></div>
				</div>
			</header>
			<section id="content">
				<ul class="list">
					<li class="home">
						<section class="set">
							<ul class="home1">
								<li class="commonTitle active ">
									<div class="item">one layer</div>
								</li>
								<li class="commonTitle">
									<div class="item">two layer</div>
								</li>
								<li class="commonTitle">
									<div class="item">three layer</div>
								</li>
								<li class="commonTitle">
									<div class="item">four layer</div>
								</li>
							</ul>
							<ul class="home2">
								<li class="active"></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</section>
					</li>
					<li class="course">
						<section class="set">
						<header class="course1 commonTitle">
							<span>EINIGE</span>  <br />
							<span>UNSERER</span> <br />
							<span>KUNDEN</span>  <br />
						</header>
						<div class="course2 commonText">
							<p>
								Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann. 
								<br />
								Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
							</p>
						</div>
						<div class="course3">
							<span class="line"></span>
							<span class="line"></span>
							<span class="line"></span>
							<span class="line"></span>
							<span class="line"></span>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰,我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div><div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							<div class="item">
								<div class="backFace"></div>
								<div class="face">我有一头邱海峰</div>
							</div>
							
						</div>
						</section>
					</li>
					<li class="works">
						<section>
							<header class="work1 commonTitle">
								<span>EINBLICK</span><br/>
								<span>ERKENNTNIS</span><br/>
							    <span>ERGEBNIS</span><br/>
							</header>
							<div class="work2">
								<div class="item">
									<img src="img/worksimg1.jpg"/>
									<div class="mack">
										<span>我有一头张晓飞,我有两天头张晓飞，我有三头张晓飞</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg2.jpg"/>
									<div class="mack">
										<span>我有一头张晓飞,我有两天头张晓飞，我有三头张晓飞</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg3.jpg"/>
									<div class="mack">
										<span>我有一头张晓飞,我有两天头张晓飞，我有三头张晓飞</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg4.jpg"/>
									<div class="mack">
										<span>我有一头张晓飞,我有两天头张晓飞，我有三头张晓飞</span>
										<div class="icon"></div>
									</div>
								</div>
							</div>
							<div class="work3">
								
							</div>
						</section>
					
					</li>
					<li class="about">
						<section class="set">
							<div class="about1 commonTitle" >
								<span>EINIGE</span>  <br />
								<span>KUNDEN</span> <br />
								<span>UNSERER</span>  <br />
							</div>
							<div class="about2 commonText">
								<p>
									Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann. 
									<br />
									Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
								</p>
							</div>
							<div class="about3 ">
								<div class="item">
									<span></span>
									<ul data-src="./img/about1.jpg"></ul>
								</div>
								<div  class="item">
									<span></span>
									<ul data-src="./img/about3.jpg"></ul>
								</div>
							</div>
						</section>
					</li>
					<li class="team">
						<section class="set">
							<header class="team1 commonTitle">
								<span>EINIGE</span>  <br />
								<span>UNSERER</span> <br />
								<span>KUNDEN</span>  <br />
							</header>
							<div class="team2 commonText">
								<p>
									Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann. 
									<br />
									Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
								</p>
							</div>
							<div class="team3">
								<ul>
									<li></li>
									<li></li>
									<li></li>
									<li></li>
									<li></li>
									<li></li>
									<li></li>
									<li></li>
								</ul>
							</div>
							
						</section>
					</li>
				</ul>
				<ul class="dot">
					<li class="active"></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
		</section>
	</body>
	
	<script type="text/javascript">
		window.onload=function (){
			 //头部
			var arrow = document.querySelector('#head .headMain > .arrow');
			var liNodes = document.querySelectorAll('#head .headMain > .nav > .list > li');
			var upNodes = document.querySelectorAll("#head .headMain > .nav > .list > li .up");
			var firstLiNode  = liNodes[0];
			var firstUpNode = firstLiNode.querySelector('.up')
			//内容区
			var head = document.querySelector("#head") ;
			var content = document.querySelector('#content') ;
			var cLiNodes = document.querySelectorAll("#content .list > li");
			var cList = document.querySelector("#content .list");
			
			// 首页3d效果
			var home2 = document.querySelectorAll("#content > .list > .home .home2 > li")
			var home1 = document.querySelectorAll("#content > .list > .home .home1 > li");
			var home1Add = document.querySelector("#content > .list > .home .home1");
			
			// 右侧小圆点
			var dotli = document.querySelectorAll("#content > .dot > li");
			
			var line = document.querySelector("#mack .line");
			// 开机动画
			load();
			function load(){
// 				var arr = ['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg','about1.jpg','about2.jpg','about3.jpg','about4.jpg','worksimg1.jpg','worksimg2.jpg','worksimg3.jpg','worksimg4.jpg','team.png','greenLine.png'];
// 				var flag=0;
// 				for(var i=0;i<arr.length;i++){
// 					
// 					var img=new Image();
// 					img.src="../img/"+arr[i];
// 					
// 					img.onload=function(){
// 						console.log('fsfds')
// 						flag++;
// 						line.style.width = flag/arr.length*100+"%";
// 					}
// 				}

			}
			
			
			// 首页动画从上往下的
			var arrAdd=[
				{
					inAdd:function(){
						var home1 = document.querySelector("#content > .list > .home .home1");
						var home2 = document.querySelector("#content > .list > .home .home2");
						 
						 home1.style.transform="translateY(0px)";
						 home2.style.transform="translateY(0px)";
						 home1.style.opacity=1;
						 home2.style.opacity=1;
						 
					},
					outAdd:function(){
						// querySelector() 方法仅仅返回匹配指定选择器的第一个元素。如果你需要返回所有的元                           素，请使用 querySelectorAll() 方法替代。
						var home1 = document.querySelector("#content > .list > .home .home1");
						var home2 = document.querySelector("#content > .list > .home .home2");
						 
						 home1.style.transform="translateY(-500px)";
						 home2.style.transform="translateY(100px)";
						 home1.style.opacity=0;
						 home2.style.opacity=0;

					}
				},
				{
					inAdd:function(){},
					outAdd:function(){}
				},
				{
					inAdd:function(){},
					outAdd:function(){}
				},
				{
					inAdd:function(){},
					outAdd:function(){}
				},
				{
					inAdd:function(){},
					outAdd:function(){}
				}
			]
			arrAdd[0].outAdd();
			setTimeout(function (){
				arrAdd[0].inAdd();
			},1000)
			
			
			
			// 第五屏
			var team3 = document.querySelector("#content > .list > .team  .team3");
			var team3Ul = document.querySelector("#content > .list > .team .team3 ul");
			var teamLi = document.querySelectorAll("#content > .list > .team .team3 ul>li");	
			
			// 第五屏气泡效果
			team()
			function team(){
				var oc =null;
				var time1=0;
				var time2=0;
				for(var i=0;i<teamLi.length;i++){
					teamLi[i].onmouseenter=function(){
						for(var a=0;a<teamLi.length;a++){
							teamLi[a].style.opacity=0.2;
						}
						this.style.opacity=1;
						addCanvas();
						oc.style.left = this.offsetLeft+"px";
					}
				}
				
				function addCanvas(){
					if(!oc){
					oc = document.createElement("canvas");
					// 获取canvas 宽高
					oc.width = teamLi[0].offsetWidth;
					oc.height = teamLi[0].offsetHeight*2/3;	
					
					team3.onmouseleave=function(){
						for(var i=0;i<teamLi.length;i++){
								teamLi[i].style.opacity=0.5;
						}
							removeCanvas()
						}
						team3.appendChild(oc);
						QiPao()
					}
				}
				// 气泡效果
				
				function QiPao(){
					if(oc.getContext){
						var ctx = oc.getContext("2d");
						var arr=[];
						//将数组中的圆绘制到画布上
						time1=setInterval(function(){
							ctx.clearRect(0,0,oc.width,oc.height);
							//动画
							for(var i=0;i<arr.length;i++){
								arr[i].deg+=10;
								arr[i].x = arr[i].startX +  Math.sin( arr[i].deg*Math.PI/180 )*arr[i].step*2;
								arr[i].y = arr[i].startY - (arr[i].deg*Math.PI/180)*arr[i].step ;
								
								if(arr[i].y <=50){
									arr.splice(i,1)
								}
							}
							//绘制
							for(var i=0;i<arr.length;i++){
								ctx.save();
								ctx.fillStyle="rgba("+arr[i].red+","+arr[i].green+","+arr[i].blue+","+arr[i].alp+")";
								ctx.beginPath();
								ctx.arc(arr[i].x,arr[i].y,arr[i].r,0,2*Math.PI);
								ctx.fill();
								ctx.restore();
							}
						},1000/30)
						
						//往arr中注入随机圆的信息
						time2=setInterval(function(){
							var r =Math.random()*10;
							var x = Math.random()*oc.width;
							var y = oc.height - r;
							var red =   Math.round(Math.random()*255);
							var green = Math.round(Math.random()*255);
							var blue =  Math.round(Math.random()*255);
							var alp = 1;
							
							
							var deg =0;
							var startX = x;
							var startY = y;
							//曲线的运动形式
							var step =Math.random()*20+10;
							arr.push({
								x:x,
								y:y,
								r:r,
								red:red,
								green:green,
								blue:blue,
								alp:alp,
								deg:deg,
								startX:startX,
								startY:startY,
								step:step
							})
						},50)
					}
				}
				function removeCanvas(){
					oc.remove();
					oc=null;
					clearInterval(time1);
					clearInterval(time2);
				}
			}
			
			
			// 第四屏图片炸裂效果
			var aboutUl = document.querySelectorAll("#content > .list > .about .about3 > .item > ul");	
			
			// 第四屏图片炸裂效果
			picBoom();
			function picBoom(){
				for(var i=0; i<aboutUl.length;i++){
					change(aboutUl[i])
				}
				
				function change(Ul){
					var src=Ul.dataset.src;
					//offsetWidth获取元素的宽度
					var W=Ul.offsetWidth/2;
					var H=Ul.offsetHeight/2;
					for (var i = 0; i < 4; i++) {
						var LiNodes=document.createElement("li")
						LiNodes.style.width = W+"px";
						LiNodes.style.height = H+"px";
						var LiImg=document.createElement("img")
						
						/*
						让四张图片换位
						1. left:0    top:0
						2. left:-w   top:0
						3. left:0    top:-h
						4. left:-w   top:-h
						*/
// 						LiImg.style.left=0+"px";
// 						LiImg.style.top=0+"px";
// 						LiImg.style.left=-W+"px";
//  						LiImg.style.top=-H+"px";
//  						LiImg.style.top=-H+"px";
						LiImg.style.left=-(i%2)*W+"px";
						LiImg.style.top=-Math.floor(i/2)*H+"px";
						LiImg.src=src;
						
						LiNodes.appendChild(LiImg);
						Ul.appendChild(LiNodes);
					}
					
					Ul.onmouseenter=function (){
						// 移入时的图片
						var imgld=this.querySelectorAll('li > img')
// 							1. left:0    top:h
// 							2. left:-2w   top:0
// 							3. left:w    top:-h
// 							4. left:-w   top:-2h
						
						imgld[0].style.top=H+"px";
						imgld[1].style.left=-2*W+"px";
						imgld[2].style.top=H+"px";
						imgld[3].style.top=-2*H+"px";
					}
					Ul.onmouseleave=function (){
					 var imgld=this.querySelectorAll('li > img')
					 imgld[0].style.top=0+"px";
					 imgld[1].style.left=-W+"px";
					 imgld[2].style.top=-H+"px";
					 imgld[3].style.top=-H+"px";
					}
				}
			}
			var Hlist=0;
			var time3d=0;
			var zdIndex=0;
			
			//变量提升的坑！！！
			home3d();
			function home3d(){
				for(var i=0;i<home2.length;i++){
					// 拿到要点击的索引
					home2[i].index=i;
					//注册回调函数(同步)   执行回调函数(异步)
					home2[i].onclick=function (){
						clearInterval(time3d)
						//你点击的样式跟着一起
						for(var a=0;a<home2.length;a++){
							home2[a].classList.remove("active");
						}
						this.classList.add("active");
						// 点击从左往右点 rightHide
						if(this.index>Hlist){
							home1[this.index].classList.remove('leftShow')
							home1[this.index].classList.remove('leftHide')
							home1[this.index].classList.remove('rightHide')
							//
							home1[this.index].classList.add('rightShow')
							
							home1[Hlist].classList.remove('leftShow')
							home1[Hlist].classList.remove('rightShow')
							home1[Hlist].classList.remove('rightHide')
							// 
							home1[Hlist].classList.add('leftHide')
						}
						// 从右往左点leftShow
						if(this.index<Hlist){
							home1[this.index].classList.remove('rightShow')
							home1[this.index].classList.remove('leftHide')
							home1[this.index].classList.remove('rightHide')
							//只能有一个状态
							home1[this.index].classList.add('leftShow')
							
							home1[Hlist].classList.remove('leftShow')
							home1[Hlist].classList.remove('rightShow')
							home1[Hlist].classList.remove('rightHide')
							// 只能有一个状态
							home1[Hlist].classList.add('rightHide')
						}
						// 手动轮播的同步问题 
						Hlist=this.index;
						//手动轮播  ---> 自动轮播的同步问题！！
						//手动点完是需要自动轮播的，自动轮播从哪个面开始播？--->手动点的这个面开始自动轮播
						//手动轮播的逻辑必须药告诉自动轮播 我刚刚点了哪一个面
						// zdIndex = this.index;
					}
				}
				
				mover();
				//首页3d自动轮播
				function mover(){
					clearInterval(time3d);
					time3d=setInterval(function(){
						zdIndex++;
						// 连续滚动
						if(zdIndex==home1.length){
							zdIndex=0;
						}
						//小圆点样式自动跟着一起
						for(var i=0;i<home2.length;i++){
							home2[i].classList.remove('active');
						}
						home2[zdIndex].classList.add('active')
						
						//图片滚动起来
						home1[zdIndex].classList.remove('leftShow')
						home1[zdIndex].classList.remove('leftHide')
						home1[zdIndex].classList.remove('rightHide')
						//
						home1[zdIndex].classList.add('rightShow')
							
						home1[Hlist].classList.remove('leftShow')
						home1[Hlist].classList.remove('rightShow')
						home1[Hlist].classList.remove('rightHide')
						// 
						home1[Hlist].classList.add('leftHide')				
						
						
					 //自动轮播 --> 手动轮播的同步问题！！
					 //自动轮播一直运行...zdIndex一直在加加,自动轮播到一半时有可能触发手动轮播
					 //这个时候自动轮播的逻辑必须要告诉手动轮播  我播到哪一个面上了
						Hlist=zdIndex
					},2000)
				}
				home1Add.onmouseenter=function(){
					clearInterval(time3d);
				}
				home1Add.onmouseleave=function(){
					mover();
				}
			}
	//onmouseleave、onmouseenter，鼠标进入到指定元素区域内触发事件，不支持冒泡，不包含子元素的区域。
    //onmouseout、onmouseover、鼠标进入指定元素触发事件，含子元素区域。
	
	
			
			//同步当前屏的索引   this.index---同步---now   now----不同步---  this.index
			var now =0;
			var Time=0
			//内容区
			
			window.onresize=function(){
				//可设置 可不设置onresize
				/*
				 调整分辨率
					1.没有点击的时候视口只能出现一屏  contentBind();
					2.点击后视口只能出现一屏  在1的基础上对每一屏的偏移量进行重新调整
					3.小箭头的位置也需要头部
				*/
			contentBind();
			cList.style.top = -now*(document.documentElement.clientHeight - head.offsetHeight)+"px";
			arrow.style.left = liNodes[now].offsetLeft + liNodes[now].offsetWidth/2 - arrow.offsetWidth/2+"px";	
				
			}
			//内容区交互
			if(content.addEventListener){
				content.addEventListener('DOMMouseScroll',function(ev){
					ev=ev||event;
					clearTimeout(Time)
					//让fn的逻辑在DOMMouseScroll事件被频繁触发的时候只执行一次
					var Time=setTimeout(function(){
						fn(ev)
					},200)
				});
				//让fn的逻辑在onmousewheel事件被频繁触发的时候只执行一次
				content.onmousewheel=function(ev){
					ev=ev||event;
					clearTimeout(Time)
					Time=setTimeout(function(){
						fn(ev)
					},200)
				}
			}
			function fn(ev){
				ev=ev||event;
				var dir='';
				if(ev.wheelDelta){
					dir= ev.wheelDelta>0?'up':'down';
				}else if(ev.detail){
					dir=ev.detail<0?'up':'down';
				}
					switch (dir){
						case 'up':
								//判断大于0才能往上滚
								if(now>0){
									now--;
									headPctive(now)	
								}
							break;
						case 'down':
							if(now<cLiNodes.length-1){
							now++;
							headPctive(now)	
							}
						break;	
					}
			}
			
			//内容区
			contentBind();
			function contentBind(){
				//内容的高度
			content.style.height = document.documentElement.clientHeight - head.offsetHeight+'px';
				for(var i=0;i<cLiNodes.length;i++){
					//内容的每个li的高度
			cLiNodes[i].style.height = document.documentElement.clientHeight - head.offsetHeight+'px';
				}
			}
			
			//头部区
		headBing();
		 function headBing(){
			 firstUpNode.style.width="100%"
			  arrow.style.left = firstLiNode.offsetLeft + firstLiNode.offsetWidth/2 - arrow.offsetWidth/2+'px';
			
			 for(i=0;i<liNodes.length;i++){
			 	 //这个转绑很重要
				 liNodes[i].index = i;
			 	liNodes[i].onclick=function (){
					headPctive(this.index);
					now=this.index
			 }
         }
		  for(i=0;i<dotli.length;i++){
		 		 //这个转绑很重要
		 		dotli[i].index = i;
		 		dotli[i].onclick=function (){
		 		headPctive(this.index);
		 		now=this.index
		 	 }
		 }
		 }
	   //头部区
		headPctive(0)
	    function headPctive(index){
	   	for(a=0;a<upNodes.length;a++){
	   			 //这个是让鼠标点上去样式跟着一起走
	   		upNodes[a].style.width="0";
	   	}
	   	upNodes[index].style.width="100%";
			//这个是头部三角形跟着走
	   		arrow.style.left = liNodes[index].offsetLeft + liNodes[index].offsetWidth/2 - arrow.offsetWidth/2+"px" 
	   				//点击每个导航   内容进行切换
	   				cList.style.top = -index*(document.documentElement.clientHeight - head.offsetHeight)+"px";
			// 右侧小圆点js	
			for(a=0;a<dotli.length;a++){
				 //这个是让鼠标点上去样式跟着一起走
				dotli[a].className="";
			}
				dotli[index].className="active";	
	   					
	   	}
		
		
		
 }
	</script>
</html>
